<template>
    <div class="datatable"> 
        <!-- <p class="edit-cancel" onclick={editTable}>Edit</p> -->
        <h1>{table.title}</h1>
        <div class="search-element">
            <input class="searchInput" placeholder="Placeholder Text" type="search" onsearch={searchEvent} onfocus={showFilter}/>
            <button class="cancelSearch">Cancel</button>
            <lightning-icon class="filterIcon" icon-name="utility:connected_apps" onclick={openFilter} ></lightning-icon>
        </div>
        <template if:true={appliedFilters}>
            <template for:each={table.appliedFilters} for:item="filters">
                <div key={filters.filter.name}>
                    <span class="slds-pill slds-pill_link">
                        <span class="slds-pill__label">{filters.value1}</span>
                        <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove">
                        </button>
                    </span>
                </div>
            </template>
        </template>
        <div class="modal">
            <div class="modal__header">
                <button class="closeModal" onclick={openFilter}>Close</button>
            </div>
            <div class="modal__content">
                <template for:each={table.columns} for:item="col">
                    <div key={col.fieldName}>
                        <template if:true={col.filtrable}>
                            <h2>{col.label}</h2>
                            <template for:each={col.filtrableValues} for:item="filter">
                                <div key={filter}>
                                    <button class="filter" 
                                            data-column={col.fieldName} 
                                            data-type={col.type} 
                                            data-value={filter}
                                            onclick={filterActive}>{filter}</button>
                                </div>
                            </template>
                        </template>
                    </div>
                </template>
            </div>
            <div class="modal__footer hidden">
                <button onclick={filterRemove}>Remove All Filters</button>
                <button class="applyFilter" onclick={filterEvent}>Apply</button>
            </div>
        </div>
        <template for:each={table.tableData} for:item="row">    
            <article key={row.Id} class="slds-card slds-grid slds-wrap" onclick={openDetail}>  
                <div class="checkbox">
                    <input type="checkbox" name="options" value="checkbox"/>  
                </div>
                <template for:each={columnsToShow} for:item="col"> 
                    <div key={col.label} class={columnClass}>
                        <c-fe-datatable-row colname={col.label} column={col.fieldName} row={row}></c-fe-datatable-row>
                    </div> 
                </template>
                <!-- <template for:each={table.actions} for:item="action">
                    <footer key={action.Id} class="slds-card__footer">
                        <div class="slds-no-flex">
                            <button class="slds-button slds-button_neutral">{action.label}</button>
                            <template if:true={filterCondition}>
                                <div>Conditional Code</div>
                            </template>
                        </div>
                    </footer>
                </template> -->
            </article>
        </template>
    </div>
</template>